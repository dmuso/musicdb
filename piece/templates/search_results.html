{% include 'partials/header.html' with heading="Search Results" %}

  <div class="search-subheader">
    <form action="{% url 'search_results' %}" method="get">
      <input id="search" name="query" type="text" placeholder="Search..."
        {% if object_list.query %}
          value="{{ object_list.query }}"
        {% endif %}
      >
      <br/>
      <label>Instruments:</label>
      <select name="instrument">
        <option> </option>
        {% for instrument in object_list.instruments %}
          <option value="{{ instrument.pk }}"
            {% if object_list.instrument_query|add:"0" == instrument.pk %}
              selected
            {% endif %}
          >
          {{ instrument }}</option>
        {% endfor %}
      </select>
      <br />
      <label>Categories:</label>
      <select name="category">
        <option> </option>
        {% for category in object_list.categories %}
          <option value="{{ category.pk }}"
            {% if object_list.category_query|add:"0" == category.pk %}
              selected
            {% endif %}
          >{{ category }}</option>
        {% endfor %}
      </select>
      <br />
      <label>Composers:</label>
      <select name="composer">
        <option> </option>
        {% for composer in object_list.composers %}
          <option value="{{ composer.pk }}"
            {% if object_list.composer_query|add:"0" == composer.pk %}
              selected
            {% endif %}
          >{{ composer }}</option>
        {% endfor %}
      </select>
      <br/>
      <label>Arrangers:</label>
      <select name="arranger">
        <option> </option>
        {% for arranger in object_list.arrangers %}
          <option value="{{ arranger.pk }}"
            {% if object_list.arranger_query|add:"0" == arranger.pk %}
              selected
            {% endif %}
          >{{ arranger }}</option>
        {% endfor %}
      </select>
      <br />
      <label>Publishers:</label>
      <select name="publisher">
        <option> </option>
        {% for publisher in object_list.publishers %}
          <option value="{{ publisher.pk }}"
            {% if object_list.publisher_query|add:"0" == publisher.pk %}
              selected
            {% endif %}
          >{{ publisher }}</option>
        {% endfor %}
      </select>
      <br/>
      <input type="submit" value="Search">
    </form>
  </div>

  {% for piece in object_list.search_results %}
    <div class="columns search-results">
      <div class="column col-12 search-title">
        <a href="/pieces/{{ piece.pk }}">{{ piece }}</a>
      </div>
      <div class="column col-12 search-subtitle">
        <em>
          <b>Composer: </b>
          {% for composer in piece.composers.all %}
            {{ composer }},
          {% endfor %}
          <b>Instrument: </b>
          {% for instrument in piece.instruments.all %}
            {{ instrument }},
          {% endfor %}
          <b>Category: </b>
          {% for category in piece.categories.all %}
            {{ category }},
          {% endfor %}
        </em>
      </div>
    </div>
  {% endfor %}

{% include 'partials/footer.html' %}
